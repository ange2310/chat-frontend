<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß™ Test desde /public/ - Rutas Correctas</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white min-h-screen p-6">
    <div class="max-w-4xl mx-auto">
        <div class="bg-gray-800 rounded-lg shadow-xl p-6">
            <h1 class="text-3xl font-bold mb-6">üß™ Test desde /public/ Directory</h1>
            
            <div class="bg-yellow-900 border border-yellow-600 rounded-lg p-4 mb-6">
                <h3 class="text-yellow-300 font-semibold mb-2">üìÅ IMPORTANTE:</h3>
                <p class="text-yellow-100">Este archivo debe estar guardado como: <code>/practicas/chat-frontend/public/test-from-public.html</code></p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="bg-blue-900 border border-blue-600 rounded-lg p-4">
                    <h3 class="font-semibold text-blue-300">Ubicaci√≥n Actual</h3>
                    <p id="currentLocation" class="text-blue-100">Detectando...</p>
                </div>
                <div class="bg-green-900 border border-green-600 rounded-lg p-4">
                    <h3 class="font-semibold text-green-300">AuthClient Status</h3>
                    <p id="authStatus" class="text-green-100">Verificando...</p>
                </div>
                <div class="bg-purple-900 border border-purple-600 rounded-lg p-4">
                    <h3 class="font-semibold text-purple-300">Ruta Correcta</h3>
                    <p id="correctPath" class="text-purple-100">Calculando...</p>
                </div>
            </div>

            <div class="bg-gray-700 rounded-lg p-4 mb-6">
                <h3 class="font-semibold mb-3">üìã Test Results</h3>
                <div id="testResults" class="space-y-2 font-mono text-sm"></div>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                <button onclick="testRelativePath()" class="bg-blue-600 px-4 py-2 rounded hover:bg-blue-700">
                    Test ./assets/
                </button>
                <button onclick="testAssetsPath()" class="bg-green-600 px-4 py-2 rounded hover:bg-green-700">
                    Test assets/
                </button>
                <button onclick="testAbsolutePath()" class="bg-yellow-600 px-4 py-2 rounded hover:bg-yellow-700">
                    Test /public/assets/
                </button>
                <button onclick="clearResults()" class="bg-gray-600 px-4 py-2 rounded hover:bg-gray-700">
                    Clear
                </button>
            </div>
        </div>
    </div>

    <script>
        function log(message, type = 'info') {
            const container = document.getElementById('testResults');
            const div = document.createElement('div');
            const colors = {
                success: 'text-green-400',
                error: 'text-red-400',
                warning: 'text-yellow-400',
                info: 'text-blue-400'
            };
            div.className = colors[type] || colors.info;
            div.innerHTML = `${new Date().toLocaleTimeString()} - ${message}`;
            container.appendChild(div);
        }

        function detectLocation() {
            const path = window.location.pathname;
            document.getElementById('currentLocation').textContent = path;
            log(`üìÇ Path: ${path}`, 'info');
            
            if (path.includes('/public/')) {
                log('‚úÖ Confirmado: Estamos en /public/', 'success');
                document.getElementById('correctPath').innerHTML = '<code>assets/js/auth-client.js</code>';
            } else {
                log('‚ö†Ô∏è No estamos en /public/', 'warning');
                document.getElementById('correctPath').innerHTML = '<code>public/assets/js/auth-client.js</code>';
            }
        }

        function testRelativePath() {
            log('üß™ Testing: ./assets/js/auth-client.js', 'info');
            loadScript('./assets/js/auth-client.js', 'Relative Path');
        }

        function testAssetsPath() {
            log('üß™ Testing: assets/js/auth-client.js', 'info');
            loadScript('assets/js/auth-client.js', 'Assets Path');
        }

        function testAbsolutePath() {
            log('üß™ Testing: /practicas/chat-frontend/public/assets/js/auth-client.js', 'info');
            loadScript('/practicas/chat-frontend/public/assets/js/auth-client.js', 'Absolute Path');
        }

        function loadScript(src, testName) {
            log(`üì° Loading ${testName}: ${src}`, 'info');
            
            const script = document.createElement('script');
            script.src = src;
            
            script.onload = function() {
                log(`‚úÖ ${testName} loaded successfully!`, 'success');
                
                setTimeout(() => {
                    if (typeof AuthClient !== 'undefined') {
                        log('‚úÖ AuthClient is available!', 'success');
                        document.getElementById('authStatus').innerHTML = '‚úÖ AuthClient OK';
                        
                        try {
                            const authClient = new AuthClient();
                            const info = authClient.getDebugInfo();
                            log(`‚úÖ AuthClient working: ${JSON.stringify(info.userType)}`, 'success');
                        } catch (e) {
                            log(`‚ùå AuthClient error: ${e.message}`, 'error');
                        }
                    } else {
                        log('‚ùå AuthClient not defined after load', 'error');
                    }
                }, 100);
            };
            
            script.onerror = function() {
                log(`‚ùå ${testName} failed to load`, 'error');
                log(`üìÅ Full URL: ${this.src}`, 'error');
            };
            
            document.head.appendChild(script);
        }

        function clearResults() {
            document.getElementById('testResults').innerHTML = '';
        }

        // Auto-detect on load
        document.addEventListener('DOMContentLoaded', function() {
            log('üü¢ Test initialized from /public/', 'success');
            detectLocation();
            
            // Auto-test the most likely path
            setTimeout(() => {
                if (window.location.pathname.includes('/public/')) {
                    testAssetsPath(); // Should be assets/js/auth-client.js from /public/
                } else {
                    log('‚ö†Ô∏è Este test debe ejecutarse desde /public/ directory', 'warning');
                }
            }, 1000);
        });
    </script>
</body>
</html>